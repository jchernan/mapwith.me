<!doctype html>
<html>

  <head>
    <link rel="stylesheet" href="leaflet/leaflet.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <style>
      /* need to define html and body 100% height 
      in order to use 100% height in map div */
      html { 
        height: 100%; 
      }
      body {
        height: 100%;
        /* 60px padding will make the container go 
        all the way to the bottom of the topbar */
        padding-top: 40px;
        /* disable scroll animations */
        overflow: hidden;
      }
      .map-leaflet {
        position: absolute;
        top: 40px;
        bottom: 0;
        right: 0;
        left: 0;
      }
      .map-google {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      .map-google img {
        /* Fix distortion on Google Maps controls
        https://github.com/twitter/bootstrap/issues/1552 */
        max-width: none;
        /* max-width: inherit; */
      }
      #address-input {
        background-repeat: no-repeat;
        background-position: right;
        padding-right: 28px;
      }
      #share {
        width: 4em;
      }
      #right_bar {
        position: absolute;
        right: 50px;
        top: 150px;
        width: 290px;
        z-index: 2;
      }
      #whos_online {
        opacity: 0.85;
      }
      #chat-window {
        opacity: 0.85;
      }
      #chat-panel {
        height: 260px;
        width: 260px;
        overflow: hidden;
        /* the next two properties make the 
        message rows stack from bottom to top 
        http://stackoverflow.com/questions/6401869/ */ 
        vertical-align: bottom;
        display: table-cell;
      }
      #chat-panel-rows {
        max-height: 240px;
        max-width: 240px;
        overflow: auto;
        margin-bottom: 20px;
      }
      #chat-panel-rows .message {
        margin: 5px 5px;
        /* preserve whitespace and wrap test */
        white-space: pre-wrap;
        /* break words when they hit max-width */
        word-wrap: break-word;
        word-break: normal;
      }
      #chat-panel-rows .message .sender {
        font-weight: bold;
        /* use margin to have some spacing between
        the sender's name and the message text */
        margin-right: 10px;
      }
      #chat-send-form {
        margin-bottom: 0px;
      }
      #chat-send-form textarea {
        resize: none;
        height: 38px; 
        width: 166px;
      }
      #chat-send-form .btn {
        width: 70px;
        height: 48px;
      }

      /* Styles for venue HTML pop-up */
      span.red-star {
        background:url(images/stars/star.gif);
        display:inline-block;
        width:16px;
        height:16px;
        background-position:0px 32px;
      }

      span.gray-star {
        background:url(images/stars/star.gif);
        display:inline-block;
        width:16px;
        height:16px;
        background-position:0px 0px;
      }

      div.venue-address {
        padding-top:5px;
      }

      div.venue-icon {
        float:left;
        overflow:hidden;
      }

      img.venue-icon {
        width:32px;
        height:32px;
      }

      div.venue-main {
        float:left;
        overflow:hidden;
        margin-left:10px;
      }

    </style>
    <title>Maps</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  </head>
  
  <body onunload="">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container" style="width: 95%">
          <a class="brand" href="#">Maps</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a id="navbar-button-sf" href="javascript:void(0);" 
                   onclick="MapApp.map.setViewOnArea('san-francisco');">
                   San Francisco</a>
              </li>
              <li>
                <a id="navbar-button-bos" href="javascript:void(0);" 
                   onclick="MapApp.map.setViewOnArea('boston');">
                   Boston</a>
              </li>
            </ul>
            <ul class="nav pull-right">
              <li>
                <form class="navbar-form" 
                      onsubmit="return MapApp.search.findAddress();">
                  <input type="text" 
                         id="address-input" 
                         class="span3"  
                         placeholder="Search" /> 
                </form>
              </li>
              <li>
                <div>
                  <a href="javascript:void(0);" 
                     id="share" 
                     class="btn btn-inverse"
                     rel="popover">Share</a>
                </div>
              </li>
            </ul>
          </div>   
        </div>
      </div>
    </div>
    
    <div id="map"></div>

    <!-- Who's sharing --!> 
    <div id="right_bar" style="display:none">

      <div id="whos_online" class="well" > 
        <ul class="nav nav-list" id="user_list"> 
          <li class="nav-header" id="user_list_title" style="font-size:13px">
              No one is sharing this map!
          </li> 
        </ul>
      </div> <!-- end whos_online -->

      <div id="chat-window" class="well">
        <!-- Conversation --!> 
        <div id="chat-panel">
          <div id="chat-panel-rows">
            <div class="message"></div>
          </div>
        </div> <!-- end chat-panel --> 
        <!-- Send new message --> 
        <form class="form-vertical" id="chat-send-form">
          <textarea class="input" 
                    id="chat_text"></textarea>
          <input type="button" 
                 id="chat_button" 
                 class="btn btn-large btn-primary" 
                 value="Send"> 
          </input>
        </form> <!-- end form -->
      </div> <!-- end chat-window -->

    </div> <!-- end right_bar -->

    <script type="text/javascript" src="leaflet/leaflet.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="jquery/jquery.js"></script>
    <script type="text/javascript" src="socket.io/socket.io.js"></script> 
    <script type="text/javascript" src="bootstrap/js/bootstrap.js"></script> 
    <script type="text/javascript" src="underscore/underscore.js"></script> 
    <script type="text/javascript" src="backbone/backbone.js"></script> 
    
    <script type="text/javascript" src="mapwith.js"></script>

  </body>

</html>
